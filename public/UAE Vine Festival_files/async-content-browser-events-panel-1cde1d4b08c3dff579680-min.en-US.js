(window["wpJsonpExtractCss"]=window["wpJsonpExtractCss"]||[]).push([["async-content-browser-events-panel"],{"./common/temp/node_modules/lodash/sortBy.js":function(e,t,n){var s=n("./common/temp/node_modules/lodash/_baseFlatten.js"),r=n("./common/temp/node_modules/lodash/_baseOrderBy.js"),a=n("./common/temp/node_modules/lodash/_baseRest.js"),o=n("./common/temp/node_modules/lodash/_isIterateeCall.js");var l=a(function(e,t){if(null==e)return[];var n=t.length;n>1&&o(e,t[0],t[1])?t=[]:n>2&&o(t[0],t[1],t[2])&&(t=[t[0]]);return r(e,s(t,1),[])});e.exports=l},"./src/main/webapp/universal/src/apps/App/screens/ContentBrowser/bundles/eventItem/components/EventItem.js":function(e,t,n){"use strict";var s=n("./common/temp/node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"__esModule",{value:true});t.default=void 0;var d=s(n("./common/temp/node_modules/react/index.js"));var r=s(n("./common/temp/node_modules/prop-types/index.js"));var p=s(n("./common/temp/node_modules/moment-timezone/index.js"));var c=s(n("./src/main/webapp/universal/src/apps/App/screens/ContentBrowser/shared/components/ListItem.js"));var a=s(n("./src/main/webapp/universal/src/apps/App/screens/ContentBrowser/shared/hoc/withPanelContext.js"));var m=s(n("./src/main/webapp/universal/src/apps/App/screens/ContentBrowser/shared/components/WorkflowStatusBadge.js"));var v=s(n("./src/main/webapp/universal/src/apps/App/screens/ContentBrowser/shared/constants/WorkflowStateLabels.js"));var f=n("./src/main/webapp/universal/src/apps/App/screens/ContentBrowser/externals.js");var b=function e(t){var n=t.workflowState,s=t.structuredContent;var r=f.WebsiteStore.getState().get("timeZone");var a=(0,p.default)(s.startDate).tz(r);var o=(0,p.default)(s.endDate).tz(r);var l;var i;if(a.isSame(o,"day")){l=(0,f.formatDateTime)(a,"LLLLT");i=(0,f.formatDateTime)(o,"LT")}else{l=(0,f.formatDateTime)(a,"LLL");i=(0,f.formatDateTime)(o,"LLL")}var u=(a?l+" — ":"")+(o?i:"");var c=v.default[n];return d.default.createElement(d.default.Fragment,null,d.default.createElement(m.default,{statusText:c}),u)};var o=function e(t){var n=t.collection,s=t.contentItem,r=t.onRequestItemDelete,a=t.onRequestItemEdit,o=t.onSettingsClick,l=t.isSelected,i=t.onSelect,u=t.onDuplicateItem;return d.default.createElement(c.default,{label:s.title,subtitle:b(s),onClick:i,isSelected:l,isPreview:false,isReorderable:false,thumbnailUrl:s.coverImageUrl,actions:[{label:(0,f.t)("Settings"),onClick:o},{label:(0,f.t)("Duplicate"),onClick:function e(){return u(s.id)}},{label:(0,f.t)("Delete"),onClick:function e(){return r(s)},variant:"danger"}]})};o.propTypes={collection:r.default.object.isRequired,contentItem:r.default.object.isRequired,onRequestItemDelete:r.default.func.isRequired,onSelect:r.default.func.isRequired,isSelected:r.default.bool};var l=(0,a.default)(o);t.default=l;e.exports=t.default},"./src/main/webapp/universal/src/apps/App/screens/ContentBrowser/bundles/events/components/EventsPanel.js":function(e,t,n){"use strict";var s=n("./common/temp/node_modules/@babel/runtime/helpers/interopRequireWildcard.js");var r=n("./common/temp/node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"__esModule",{value:true});t.default=void 0;var T=r(n("./common/temp/node_modules/@babel/runtime/helpers/defineProperty.js"));var q=r(n("./common/temp/node_modules/@babel/runtime/helpers/slicedToArray.js"));var x=r(n("./common/temp/node_modules/lodash/sortBy.js"));var y=s(n("./common/temp/node_modules/react/index.js"));var a=r(n("./common/temp/node_modules/prop-types/index.js"));var P=r(n("./src/main/webapp/frontend/packages/enums/RecordType.js"));var M=r(n("./src/main/webapp/frontend/packages/enums/TemplateVersion.js"));var k=n("./common/temp/node_modules/@sqs/rosetta-elements/build/lib/index.js");var o=n("./src/main/webapp/universal/src/apps/App/screens/ContentBrowser/store/index.js");var l=n("./src/main/webapp/universal/src/apps/App/screens/ContentBrowser/store/selectors.js");var i=n("./src/main/webapp/universal/src/apps/App/screens/ContentBrowser/store/actions/editor.js");var u=n("./src/main/webapp/universal/src/apps/App/screens/ContentBrowser/store/actions/items.js");var F=r(n("./src/main/webapp/universal/src/apps/App/screens/ContentBrowser/shared/components/MultiSelectableList.js"));var N=r(n("./src/main/webapp/universal/src/apps/App/screens/ContentBrowser/shared/components/CollectionSummary.js"));var O=r(n("./src/main/webapp/universal/src/apps/App/screens/ContentBrowser/shared/components/EmptyList.js"));var c=r(n("./src/main/webapp/universal/src/apps/App/screens/ContentBrowser/shared/hoc/withPanelContext.js"));var U=r(n("./src/main/webapp/universal/src/apps/App/screens/ContentBrowser/ContentBrowserAPI.js"));var V=n("./src/main/webapp/universal/src/apps/App/screens/ContentBrowser/externals.js");var W=r(n("./src/main/webapp/universal/src/apps/App/screens/ContentBrowser/bundles/events/components/EventsPanel.less"));var G=n("./src/main/webapp/universal/src/apps/App/screens/ContentBrowser/shared/constants/LoadingStates.js");var H=r(n("./src/main/webapp/universal/src/apps/App/screens/ContentBrowser/bundles/eventItem/components/EventItem.js"));var z=r(n("./src/main/webapp/universal/src/apps/App/screens/ContentBrowser/shared/utils/useHasOtherCollectionsOfType.js"));var Y=r(n("./src/main/webapp/universal/src/apps/App/screens/ContentBrowser/bundles/events/isEvents.js"));var J=r(n("./src/main/webapp/universal/src/apps/App/screens/ContentBrowser/bundles/eventItem/isEventItem.js"));var K="POST_EDIT_REFRESH_KEY";var X="UPCOMING_EVENTS";var Z="PAST_EVENTS";var Q=[{label:(0,V.t)("Upcoming Events"),value:X},{label:(0,V.t)("Past Events"),value:Z}];var $=(0,V.t)("No Events Found");var ee=(0,V.t)("Click + to add an event");var te=function e(t){return(0,V.pluralize)({one:"Move Event…",other:"Move Events…"},t.length)};var d=function e(t){var n;var a=t.collection,s=t.collections,r=t.collectionsAndSummaries,o=t.items,l=t.pagination,i=t.onRequestItemAdd,u=t.onRequestSettingsModal,c=t.onGoToCollection,d=t.onRequestItemEdit,p=t.onLoadItemsForCollection,m=t.onSyncItem,v=t.router,f=t.onLoadItem,b=t.onLoadAndOpenAddItemModal,w=t.Y;var C=(0,y.useRef)(false);var j=(0,y.useState)(X),E=(0,q.default)(j,2),A=E[0],h=E[1];var S=[G.LOADING,G.UNLOADED].includes(null===(n=s[a.id])||void 0===n?void 0:n.loadingState);var I=(0,z.default)(Y.default,r,a.id);var g=function e(t){v.replaceFrameUrl("".concat(a.urlId,"/").concat(t.urlId));if(C.current)return;C.current=true;V.FrameActions.addLoadHandler(K,function(){setTimeout(function(){V.FrameActions.removeLoadHandler(K);V.FrameActions.enterItemInlineEditingMode();C.current=false;b(t)},100)});V.FrameActions.setUrl(t.fullUrl)};var _=function e(){V.TemplateVersionUtils.getVersion()===M.default.SEVEN?U.default.addEvent70(w,a.id):i(P.default.EVENT,g)};var R=(0,y.useMemo)(function(){var e;var s=new Date;return(0,x.default)(o.filter(J.default),function(e){return e.structuredContent.startDate}).reduce(function(e,t){var n=t.structuredContent;s>new Date(n.endDate)?e[Z].unshift(t):e[X].push(t);return e},(e={},(0,T.default)(e,X,[]),(0,T.default)(e,Z,[]),e))},[o]);var B=R[X].length||R[Z].length;var D=function e(){if(S||!l.hasNextPage)return;var t={start:l.nextPageStart};p(a.id,t)};var L=function e(t){var n=t.item,s=t.handleSelectItem,r=t.isSelected;return y.default.createElement(H.default,{collection:a,contentItem:n,isSelected:r,onSelect:function e(t){return s(t,n)},onSettingsClick:function e(){V.TemplateVersionUtils.getVersion()===M.default.SEVEN?U.default.openEventModal70(w,a.id,n.id):d(n)}})};return y.default.createElement(y.Fragment,null,y.default.createElement(N.default,{collection:a,onRequestSettingsModal:u,onGoToCollection:c,onRequestItemAdd:_}),B?y.default.createElement(y.Fragment,null,y.default.createElement(k.Tabs,{options:Q,value:A,onChange:h,className:W.default.filters,fitted:true}),y.default.createElement(F.default,{items:R[A],loadMoreItems:D,hasNextPage:l.hasNextPage,isLoadingResults:false,showMoveButton:I,collection:a,onClearSelection:c,emptyMessageTitle:$,renderItem:L,destinationCollectionsFilter:Y.default,getConfirmMoveButtonLabel:te})):y.default.createElement(O.default,{title:$,description:ee}))};d.propTypes={collection:a.default.object,items:a.default.array,onRequestItemAdd:a.default.func.isRequired,onRequestSettingsModal:a.default.func.isRequired,onGoToCollection:a.default.func.isRequired,isLoading:a.default.bool,pagination:a.default.object,onLoadItemsForCollection:a.default.func.isRequired,router:a.default.object.isRequired,Y:a.default.object.isRequired};var p=(0,V.withY)((0,V.withRouter)((0,c.default)(d)));var m=(0,o.connect)(function(e,t){return{collections:(0,l.getCollections)(e),collectionsAndSummaries:(0,l.getAllCollections)(e)}},{onLoadAndOpenAddItemModal:i.loadAndOpenAddItemModal,onSyncItem:u.syncItem})(p);t.default=m;e.exports=t.default},"./src/main/webapp/universal/src/apps/App/screens/ContentBrowser/bundles/events/components/EventsPanel.less":function(e,t,n){e.exports={filters:"EventsPanel-filters-1Xu_D"}},"./src/main/webapp/universal/src/apps/App/screens/ContentBrowser/shared/constants/WorkflowStateLabels.js":function(e,t,n){"use strict";var s=n("./common/temp/node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"__esModule",{value:true});t.default=void 0;var r=s(n("./common/temp/node_modules/@babel/runtime/helpers/defineProperty.js"));var a=s(n("./src/main/webapp/frontend/packages/enums/WorkflowStates.js"));var o=n("./src/main/webapp/universal/src/apps/App/screens/ContentBrowser/externals.js");var l;var i=(l={},(0,r.default)(l,a.default.SCHEDULED,(0,o.t)("Scheduled")),(0,r.default)(l,a.default.NEEDS_REVIEW,(0,o.t)("Needs Review")),(0,r.default)(l,a.default.DRAFT,(0,o.t)("Draft")),(0,r.default)(l,a.default.DELETED,(0,o.t)("Deleted")),l);t.default=i;e.exports=t.default}}]);
//# sourceMappingURL=https://sourcemaps.squarespace.net/universal/scripts-compressed/async-content-browser-events-panel-d51b9397e0c99cf675364-min.en-US.js.map